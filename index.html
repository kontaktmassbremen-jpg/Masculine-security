<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<title>Masculine Security – Dienstplan</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{font-family:Arial;background:#0b1220;color:white;padding:20px}
.card{background:#10203a;padding:20px;border-radius:15px;margin-bottom:20px}
input,select,textarea{width:100%;padding:10px;margin:5px 0}
button{padding:10px;margin-top:10px}
.logo{width:70px;height:70px;background:#fff;border-radius:10px;overflow:hidden;margin-bottom:10px}
.logo img{width:100%}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:8px;text-align:left}
.tab{padding:10px;background:#1a2a4b;margin-right:5px;cursor:pointer;display:inline-block;border-radius:5px}
.active{background:#3aa6ff}
</style>
</head>

<body>

<div class="logo">
<img src="logo.png?v=2">
</div>

<div>
<span class="tab active" onclick="show('plan',this)">Wochenplan</span>
<span class="tab" onclick="show('doc',this)">Dokumentation</span>
</div>

<div id="plan" class="card">

<h3>Wöchentlicher Mitarbeiter-Dienstplan</h3>

<label>Name</label>
<input id="name">

<label>Arbeitstage</label>
<input id="days" placeholder="Mo, Di, Mi, Do">

<label>Objekt</label>
<input id="objekt">

<label>Schicht</label>
<select id="shift">
<option>Tag</option>
<option>Nacht</option>
</select>

<button onclick="addStaff()">Speichern</button>

<table id="planTable">
<thead>
<tr><th>Name</th><th>Tage</th><th>Objekt</th><th>Schicht</th></tr>
</thead>
<tbody></tbody>
</table>

</div>

<div id="doc" class="card" style="display:none">

<h3>Anwesenheits-Dokumentation</h3>

<label>Datum</label>
<input id="dDate" type="date">

<label>Anwesend</label>
<textarea id="present" placeholder="Mustafa&#10;Ali"></textarea>

<label>Abwesend</label>
<textarea id="absent" placeholder="Ahmed - Krank"></textarea>

<button onclick="saveDoc()">Speichern</button>

<table id="docTable">
<thead>
<tr><th>Datum</th><th>Anwesend</th><th>Abwesend</th></tr>
</thead>
<tbody></tbody>
</table>

</div>

<br>
<button onclick="printSheet()">Drucken</button>
<button onclick="pdf()">PDF Export</button>

<script>

function show(id,el){
document.getElementById("plan").style.display="none"
document.getElementById("doc").style.display="none"
document.getElementById(id).style.display="block"

document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'))
el.classList.add('active')
}

function addStaff(){
let data={
name:document.getElementById("name").value,
days:document.getElementById("days").value,
objekt:document.getElementById("objekt").value,
shift:document.getElementById("shift").value
}
let list=JSON.parse(localStorage.getItem("staff")||"[]")
list.push(data)
localStorage.setItem("staff",JSON.stringify(list))
renderPlan()
}

function renderPlan(){
let list=JSON.parse(localStorage.getItem("staff")||"[]")
let tbody=document.querySelector("#planTable tbody")
tbody.innerHTML=""
list.forEach(x=>{
tbody.innerHTML+=`
<tr>
<td>${x.name}</td>
<td>${x.days}</td>
<td>${x.objekt}</td>
<td>${x.shift}</td>
</tr>`
})
}

function saveDoc(){
let data={
date:document.getElementById("dDate").value,
present:document.getElementById("present").value,
absent:document.getElementById("absent").value
}
let list=JSON.parse(localStorage.getItem("docs")||"[]")
list.push(data)
localStorage.setItem("docs",JSON.stringify(list))
renderDoc()
}

function renderDoc(){
let list=JSON.parse(localStorage.getItem("docs")||"[]")
let tbody=document.querySelector("#docTable tbody")
tbody.innerHTML=""
list.forEach(x=>{
tbody.innerHTML+=`
<tr>
<td>${x.date}</td>
<td>${x.present}</td>
<td>${x.absent}</td>
</tr>`
})
}

renderPlan()
renderDoc()

function printSheet(){window.print()}

function pdf(){
const {jsPDF}=window.jspdf
let doc=new jsPDF()
doc.text("Masculine Security Dienstplan",10,10)
doc.save("dienstplan.pdf")
}

</script>

</body>
</html>

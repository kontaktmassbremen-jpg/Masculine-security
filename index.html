<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Masculine Security â€” Monthly Plan</title>

<style>
body{font-family:Arial;background:#f4f5f7;margin:0}
.wrap{max-width:1200px;margin:20px auto;padding:10px}
.paper{background:#fff;border-radius:12px;padding:20px}
.title{text-align:center;color:#c40000;font-weight:bold;font-size:22px;margin-bottom:10px}
.section{margin-top:25px}
h3{margin-bottom:6px;color:#0b2a5a}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #333;padding:8px;text-align:center;font-size:12px}
th{background:#f1f1f1}
.cell{cursor:pointer;min-height:60px}
.weekend{background:#f9f0f0}
textarea{width:100%;height:80px;border-radius:8px;padding:8px}
button{padding:8px 12px;border-radius:8px;border:1px solid #ccc;background:#fff;cursor:pointer}
.summary{display:flex;gap:20px}
.box{flex:1;border:1px solid #ddd;padding:10px;border-radius:10px;background:#fafafa}
</style>
</head>
<body>

<div class="wrap">
<div class="paper">

<div class="title">MONTHLY SECURITY PLAN</div>

<h3 id="monthLabel"></h3>

<table id="calendar"></table>

<div class="section">
<h3>Documentation</h3>
<textarea id="doc"></textarea>
</div>

<div class="section">
<h3>Monthly Summary</h3>
<div class="summary">
<div class="box">
<b>Total Shifts:</b>
<div id="totalShifts">0</div>
</div>
<div class="box">
<b>Total Hours:</b>
<div id="totalHours">0</div>
</div>
<div class="box">
<b>Night Shifts:</b>
<div id="nightShifts">0</div>
</div>
</div>
</div>

<div class="section">
<h3>Employee Monthly Log</h3>
<table id="log">
<tr>
<th>Employee</th>
<th>Date</th>
<th>Shift</th>
</tr>
</table>
</div>

</div>
</div>

<script>

const employees=["Mustafa"];

let shifts={};

const calendar=document.getElementById("calendar");

const month= new Date().getMonth();
const year= new Date().getFullYear();

document.getElementById("monthLabel").innerText=
new Date(year,month).toLocaleString('de-DE',{month:'long',year:'numeric'});

function daysInMonth(m,y){
return new Date(y,m+1,0).getDate();
}

function isoWeek(d){
d=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()));
d.setUTCDate(d.getUTCDate()+4-(d.getUTCDay()||7));
var yearStart=new Date(Date.UTC(d.getUTCFullYear(),0,1));
return Math.ceil((((d-yearStart)/86400000)+1)/7);
}

function render(){
calendar.innerHTML="";

let days=daysInMonth(month,year);

let row=document.createElement("tr");
row.innerHTML="<th>KW</th><th>Mo</th><th>Di</th><th>Mi</th><th>Do</th><th>Fr</th><th>Sa</th><th>So</th>";
calendar.appendChild(row);

let start=new Date(year,month,1);

while(start.getMonth()==month){
let tr=document.createElement("tr");

let kw=isoWeek(start);
let kwCell=document.createElement("td");
kwCell.innerText="KW "+kw;
tr.appendChild(kwCell);

for(let i=0;i<7;i++){
let td=document.createElement("td");
td.className="cell";

let d=new Date(start);
d.setDate(start.getDate()+i);

if(d.getMonth()==month){
let key=d.toISOString().split("T")[0];
td.innerText=shifts[key]||d.getDate();
td.onclick=()=>{
let v=prompt("Shift?");
if(v){shifts[key]=v;}
updateLog(d,v);
renderSummary();
render();
};
}

tr.appendChild(td);
}

calendar.appendChild(tr);
start.setDate(start.getDate()+7);
}
}

function updateLog(date,shift){
let log=document.getElementById("log");
let tr=document.createElement("tr");
tr.innerHTML=`<td>Mustafa</td><td>${date.toLocaleDateString()}</td><td>${shift}</td>`;
log.appendChild(tr);
}

function renderSummary(){
let total=Object.keys(shifts).length;
document.getElementById("totalShifts").innerText=total;
}

render();

</script>
</body>
</html>

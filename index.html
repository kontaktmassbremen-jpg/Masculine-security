<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Masculine Security ‚Äî Rechnung App</title>

<style>
:root{
--bg:#0b1220;--panel:#0f1a2f;--card:#10203a;--text:#e7eeff;
--muted:#93a4c6;--accent:#3aa6ff;--good:#2bd4bd;--bad:#ff4d6d;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui;background:#07101f;color:var(--text)}
.app{display:grid;grid-template-columns:280px 1fr;gap:16px;padding:16px;max-width:1400px;margin:auto}
.sidebar{background:linear-gradient(#10203a,#0c1629);padding:14px;border-radius:14px}
.nav button{all:unset;display:flex;justify-content:space-between;padding:10px;border-radius:12px;border:1px solid #1a2a4b;cursor:pointer}
.nav button.active{background:rgba(58,166,255,.2)}
.main{background:linear-gradient(#10203a,#0c1629);border-radius:14px;overflow:hidden}
.card{background:#0f1a2f;padding:14px;border-radius:12px;margin-bottom:14px}
.field{display:flex;flex-direction:column;margin-bottom:8px}
input,select,textarea{padding:8px;border-radius:8px;border:1px solid #1a2a4b;background:#050b16;color:#fff}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid #1a2a4b;padding:6px}
.right{text-align:right}
.hide{display:none}
.btn{background:#3aa6ff;border:none;padding:8px 12px;border-radius:8px;color:#fff;cursor:pointer}
.btn.danger{background:#c44}
.note{font-size:12px;color:#ccc}
</style>
</head>

<body>

<div class="app">

<aside class="sidebar">
<h3>Masculine Security</h3>
<div class="nav">
<button data-page="invoices" class="active">üßæ Rechnungen</button>
<button data-page="customers">üë§ Kunden</button>
<button data-page="settings">‚öôÔ∏è Einstellungen</button>
</div>
</aside>

<main class="main">

<section id="page-invoices" class="card">
<h2>Rechnung</h2>

<div class="field"><label>Tage</label><input id="w_days" type="number"></div>
<div class="field"><label>Std/Tag</label><input id="w_hpd" type="number"></div>
<div class="field"><label>‚Ç¨/h</label><input id="w_rate" type="number"></div>
<div class="field"><label>Total Stunden</label><input id="w_total" readonly></div>

<table class="table">
<thead><tr><th>Beschreibung</th><th class="right">Menge</th><th class="right">Preis</th><th class="right">Netto</th></tr></thead>
<tbody id="linesBody"></tbody>
</table>

<div class="field"><label>Gesamt</label><input id="sum_total" readonly></div>

<button class="btn" id="btnSaveInvoice">Speichern</button>
<button class="btn" id="btnPrint">PDF</button>
</section>

<section id="page-customers" class="card hide">
<h2>Kunden</h2>
<input id="c_name" placeholder="Firma">
<button class="btn" id="btnCustomerSave">Speichern</button>
<table class="table"><tbody id="customersList"></tbody></table>
</section>

<section id="page-settings" class="card hide">
<h2>Firma</h2>
<input id="s_company">
<textarea id="s_addr"></textarea>
<input id="s_taxid" placeholder="Steuernummer">
<button class="btn" id="btnSettingsSave">Speichern</button>
</section>

</main>
</div>

<script>
const $=id=>document.getElementById(id);
const DB="ms_final_v5";

let DATA=JSON.parse(localStorage.getItem(DB)||"{}");
DATA.settings ||= {company:"Masculine Security",addr:"Bremen",taxid:""};
DATA.customers ||= [];
DATA.invoices ||= [];

function save(){localStorage.setItem(DB,JSON.stringify(DATA));}

/* NAV */
document.querySelectorAll(".nav button").forEach(b=>{
 b.onclick=()=>{
  document.querySelectorAll(".nav button").forEach(x=>x.classList.remove("active"));
  b.classList.add("active");
  document.querySelectorAll("section").forEach(s=>s.classList.add("hide"));
  $("page-"+b.dataset.page).classList.remove("hide");
 };
});

/* AUTO CALC */
function calc(){
 let h=(+w_days.value||0)*(+w_hpd.value||0);
 w_total.value=h;
 let rate=+w_rate.value||0;
 let net=h*rate;
 linesBody.innerHTML=`<tr>
 <td>Sicherheitsdienstleistung</td>
 <td class="right">${h}</td>
 <td class="right">${rate.toFixed(2)}</td>
 <td class="right">${net.toFixed(2)}</td>
 </tr>`;
 sum_total.value=net.toFixed(2);
}

["w_days","w_hpd","w_rate"].forEach(id=>$(id).oninput=calc);

/* SAVE INVOICE */
btnSaveInvoice.onclick=()=>{
 DATA.invoices.push({hours:w_total.value,total:sum_total.value});
 save();
 alert("Gespeichert");
};

/* PDF */
btnPrint.onclick=()=>{
 let w=window.open("");
 w.document.write(`
 <h1>Rechnung</h1>
 <b>${DATA.settings.company}</b><br>
 ${DATA.settings.addr}<br>
 Steuer: ${DATA.settings.taxid}<hr>
 Stunden:${w_total.value}<br>
 Gesamt:${sum_total.value}‚Ç¨
 `);
 w.print();
};

/* CUSTOMERS */
btnCustomerSave.onclick=()=>{
 DATA.customers.push({name:c_name.value});
 save();
 renderCustomers();
};
function renderCustomers(){
 customersList.innerHTML="";
 DATA.customers.forEach(c=>{
  customersList.innerHTML+=`<tr><td>${c.name}</td></tr>`;
 });
}

/* SETTINGS */
btnSettingsSave.onclick=()=>{
 DATA.settings.company=s_company.value;
 DATA.settings.addr=s_addr.value;
 DATA.settings.taxid=s_taxid.value;
 save();
 alert("Gespeichert");
};

/* INIT */
s_company.value=DATA.settings.company;
s_addr.value=DATA.settings.addr;
s_taxid.value=DATA.settings.taxid;
renderCustomers();
</script>

</body>
</html>
